import{_ as y,r as c,c as v,o as I,a as l,b as s,w as n,d as w,e as r,u as V,f as b,E as i,g as k}from"./index-Cqd-qCq5.js";const x={class:"login-page"},K={class:"login-card"},A={__name:"LoginView",setup(P){const p=V(),o=c(localStorage.getItem("token")||""),u=c(!1),m=async()=>{var d,e;if(!o.value){i.error("请输入 API Key");return}u.value=!0;try{const{data:t}=await k.post("/api/login",{api_key:o.value});t.success?(localStorage.setItem("token",o.value),localStorage.setItem("is_admin",t.is_admin?"1":"0"),localStorage.setItem("username",t.username||""),i.success("登录成功"),p.push(t.is_admin?"/models":"/my-usage")):i.error(t.message||"登录失败")}catch(t){const a=((e=(d=t.response)==null?void 0:d.data)==null?void 0:e.error)||"API Key 无效或请求失败";i.error(a)}finally{u.value=!1}};return(d,e)=>{const t=r("el-input"),a=r("el-form-item"),_=r("el-button"),f=r("el-form");return I(),v("div",x,[l("div",K,[e[2]||(e[2]=l("h1",{class:"title"},"ClaudeRouter 登录",-1)),e[3]||(e[3]=l("p",{class:"subtitle"}," 请输入系统分配的 API Key ",-1)),s(f,{onSubmit:w(m,["prevent"])},{default:n(()=>[s(a,{label:"API Key"},{default:n(()=>[s(t,{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=g=>o.value=g),placeholder:"请输入 API Key","show-password":"",clearable:""},null,8,["modelValue"])]),_:1}),s(a,null,{default:n(()=>[s(_,{type:"primary",loading:u.value,style:{width:"100%"},onClick:m},{default:n(()=>e[1]||(e[1]=[b(" 登录 ")])),_:1},8,["loading"])]),_:1})]),_:1}),e[4]||(e[4]=l("p",{class:"hint"}," 管理员登录后可访问模型与用户管理，普通用户登录后可查看自己的额度与 token 使用情况。 ",-1))])])}}},C=y(A,[["__scopeId","data-v-f09d34e3"]]);export{C as default};
