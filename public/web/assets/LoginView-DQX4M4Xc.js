import{_ as y,r as m,c as v,o as I,a as c,b as a,w as l,d as w,e as n,u as V,f as b,E as r,g as k}from"./index-ZgPeMoVT.js";const x={class:"login-page"},K={class:"login-card"},A={__name:"LoginView",setup(P){const _=V(),t=m(localStorage.getItem("token")||""),i=m(!1),d=async()=>{var u,e;if(!t.value){r.error("请输入 API Key");return}i.value=!0;try{const{data:o}=await k.post("/api/login",{api_key:t.value});o.success?(localStorage.setItem("token",t.value),localStorage.setItem("is_admin",o.is_admin?"1":"0"),localStorage.setItem("username",o.username||""),r.success("登录成功"),_.push(o.is_admin?"/models":"/my-usage")):r.error(o.message||"登录失败")}catch(o){const s=((e=(u=o.response)==null?void 0:u.data)==null?void 0:e.error)||"API Key 无效或请求失败";r.error(s)}finally{i.value=!1}};return(u,e)=>{const o=n("el-input"),s=n("el-form-item"),p=n("el-button"),f=n("el-form");return I(),v("div",x,[c("div",K,[e[2]||(e[2]=c("h1",{class:"title"},"ClaudeRouter 登录",-1)),e[3]||(e[3]=c("p",{class:"subtitle"}," 请输入系统分配的 API Key ",-1)),a(f,{onSubmit:w(d,["prevent"])},{default:l(()=>[a(s,{label:"API Key"},{default:l(()=>[a(o,{modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=g=>t.value=g),placeholder:"请输入 API Key","show-password":"",clearable:""},null,8,["modelValue"])]),_:1}),a(s,null,{default:l(()=>[a(p,{type:"primary",loading:i.value,style:{width:"100%"},onClick:d},{default:l(()=>e[1]||(e[1]=[b(" 登录 ")])),_:1},8,["loading"])]),_:1})]),_:1})])])}}},h=y(A,[["__scopeId","data-v-7d75cc6a"]]);export{h as default};
